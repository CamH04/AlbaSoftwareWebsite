{"ast":null,"code":"/**\n * @typedef CoreOptions\n * @property {ReadonlyArray<string>} [subset=[]]\n *   Whether to only escape the given subset of characters.\n * @property {boolean} [escapeOnly=false]\n *   Whether to only escape possibly dangerous characters.\n *   Those characters are `\"`, `&`, `'`, `<`, `>`, and `` ` ``.\n *\n * @typedef FormatOptions\n * @property {(code: number, next: number, options: CoreWithFormatOptions) => string} format\n *   Format strategy.\n *\n * @typedef {CoreOptions & FormatOptions & import('./util/format-smart.js').FormatSmartOptions} CoreWithFormatOptions\n */\n\nconst defaultSubsetRegex = /[\"&'<>`]/g;\nconst surrogatePairsRegex = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\nconst controlCharactersRegex =\n// eslint-disable-next-line no-control-regex, unicorn/no-hex-escape\n/[\\x01-\\t\\v\\f\\x0E-\\x1F\\x7F\\x81\\x8D\\x8F\\x90\\x9D\\xA0-\\uFFFF]/g;\nconst regexEscapeRegex = /[|\\\\{}()[\\]^$+*?.]/g;\n\n/** @type {WeakMap<ReadonlyArray<string>, RegExp>} */\nconst subsetToRegexCache = new WeakMap();\n\n/**\n * Encode certain characters in `value`.\n *\n * @param {string} value\n * @param {CoreWithFormatOptions} options\n * @returns {string}\n */\nexport function core(value, options) {\n  value = value.replace(options.subset ? charactersToExpressionCached(options.subset) : defaultSubsetRegex, basic);\n  if (options.subset || options.escapeOnly) {\n    return value;\n  }\n  return value\n  // Surrogate pairs.\n  .replace(surrogatePairsRegex, surrogate)\n  // BMP control characters (C0 except for LF, CR, SP; DEL; and some more\n  // non-ASCII ones).\n  .replace(controlCharactersRegex, basic);\n\n  /**\n   * @param {string} pair\n   * @param {number} index\n   * @param {string} all\n   */\n  function surrogate(pair, index, all) {\n    return options.format((pair.charCodeAt(0) - 0xd800) * 0x400 + pair.charCodeAt(1) - 0xdc00 + 0x10000, all.charCodeAt(index + 2), options);\n  }\n\n  /**\n   * @param {string} character\n   * @param {number} index\n   * @param {string} all\n   */\n  function basic(character, index, all) {\n    return options.format(character.charCodeAt(0), all.charCodeAt(index + 1), options);\n  }\n}\n\n/**\n * A wrapper function that caches the result of `charactersToExpression` with a WeakMap.\n * This can improve performance when tooling calls `charactersToExpression` repeatedly\n * with the same subset.\n *\n * @param {ReadonlyArray<string>} subset\n * @returns {RegExp}\n */\nfunction charactersToExpressionCached(subset) {\n  let cached = subsetToRegexCache.get(subset);\n  if (!cached) {\n    cached = charactersToExpression(subset);\n    subsetToRegexCache.set(subset, cached);\n  }\n  return cached;\n}\n\n/**\n * @param {ReadonlyArray<string>} subset\n * @returns {RegExp}\n */\nfunction charactersToExpression(subset) {\n  /** @type {Array<string>} */\n  const groups = [];\n  let index = -1;\n  while (++index < subset.length) {\n    groups.push(subset[index].replace(regexEscapeRegex, '\\\\$&'));\n  }\n  return new RegExp('(?:' + groups.join('|') + ')', 'g');\n}","map":{"version":3,"names":["defaultSubsetRegex","surrogatePairsRegex","controlCharactersRegex","regexEscapeRegex","subsetToRegexCache","WeakMap","core","value","options","replace","subset","charactersToExpressionCached","basic","escapeOnly","surrogate","pair","index","all","format","charCodeAt","character","cached","get","charactersToExpression","set","groups","length","push","RegExp","join"],"sources":["/home/cameron/Desktop/AlbaSoftwareWebsite/articleswebsite/site/node_modules/stringify-entities/lib/core.js"],"sourcesContent":["/**\n * @typedef CoreOptions\n * @property {ReadonlyArray<string>} [subset=[]]\n *   Whether to only escape the given subset of characters.\n * @property {boolean} [escapeOnly=false]\n *   Whether to only escape possibly dangerous characters.\n *   Those characters are `\"`, `&`, `'`, `<`, `>`, and `` ` ``.\n *\n * @typedef FormatOptions\n * @property {(code: number, next: number, options: CoreWithFormatOptions) => string} format\n *   Format strategy.\n *\n * @typedef {CoreOptions & FormatOptions & import('./util/format-smart.js').FormatSmartOptions} CoreWithFormatOptions\n */\n\nconst defaultSubsetRegex = /[\"&'<>`]/g\nconst surrogatePairsRegex = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g\nconst controlCharactersRegex =\n  // eslint-disable-next-line no-control-regex, unicorn/no-hex-escape\n  /[\\x01-\\t\\v\\f\\x0E-\\x1F\\x7F\\x81\\x8D\\x8F\\x90\\x9D\\xA0-\\uFFFF]/g\nconst regexEscapeRegex = /[|\\\\{}()[\\]^$+*?.]/g\n\n/** @type {WeakMap<ReadonlyArray<string>, RegExp>} */\nconst subsetToRegexCache = new WeakMap()\n\n/**\n * Encode certain characters in `value`.\n *\n * @param {string} value\n * @param {CoreWithFormatOptions} options\n * @returns {string}\n */\nexport function core(value, options) {\n  value = value.replace(\n    options.subset\n      ? charactersToExpressionCached(options.subset)\n      : defaultSubsetRegex,\n    basic\n  )\n\n  if (options.subset || options.escapeOnly) {\n    return value\n  }\n\n  return (\n    value\n      // Surrogate pairs.\n      .replace(surrogatePairsRegex, surrogate)\n      // BMP control characters (C0 except for LF, CR, SP; DEL; and some more\n      // non-ASCII ones).\n      .replace(controlCharactersRegex, basic)\n  )\n\n  /**\n   * @param {string} pair\n   * @param {number} index\n   * @param {string} all\n   */\n  function surrogate(pair, index, all) {\n    return options.format(\n      (pair.charCodeAt(0) - 0xd800) * 0x400 +\n        pair.charCodeAt(1) -\n        0xdc00 +\n        0x10000,\n      all.charCodeAt(index + 2),\n      options\n    )\n  }\n\n  /**\n   * @param {string} character\n   * @param {number} index\n   * @param {string} all\n   */\n  function basic(character, index, all) {\n    return options.format(\n      character.charCodeAt(0),\n      all.charCodeAt(index + 1),\n      options\n    )\n  }\n}\n\n/**\n * A wrapper function that caches the result of `charactersToExpression` with a WeakMap.\n * This can improve performance when tooling calls `charactersToExpression` repeatedly\n * with the same subset.\n *\n * @param {ReadonlyArray<string>} subset\n * @returns {RegExp}\n */\nfunction charactersToExpressionCached(subset) {\n  let cached = subsetToRegexCache.get(subset)\n\n  if (!cached) {\n    cached = charactersToExpression(subset)\n    subsetToRegexCache.set(subset, cached)\n  }\n\n  return cached\n}\n\n/**\n * @param {ReadonlyArray<string>} subset\n * @returns {RegExp}\n */\nfunction charactersToExpression(subset) {\n  /** @type {Array<string>} */\n  const groups = []\n  let index = -1\n\n  while (++index < subset.length) {\n    groups.push(subset[index].replace(regexEscapeRegex, '\\\\$&'))\n  }\n\n  return new RegExp('(?:' + groups.join('|') + ')', 'g')\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,kBAAkB,GAAG,WAAW;AACtC,MAAMC,mBAAmB,GAAG,iCAAiC;AAC7D,MAAMC,sBAAsB;AAC1B;AACA,4DAA4D;AAC9D,MAAMC,gBAAgB,GAAG,qBAAqB;;AAE9C;AACA,MAAMC,kBAAkB,GAAG,IAAIC,OAAO,CAAC,CAAC;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,IAAIA,CAACC,KAAK,EAAEC,OAAO,EAAE;EACnCD,KAAK,GAAGA,KAAK,CAACE,OAAO,CACnBD,OAAO,CAACE,MAAM,GACVC,4BAA4B,CAACH,OAAO,CAACE,MAAM,CAAC,GAC5CV,kBAAkB,EACtBY,KACF,CAAC;EAED,IAAIJ,OAAO,CAACE,MAAM,IAAIF,OAAO,CAACK,UAAU,EAAE;IACxC,OAAON,KAAK;EACd;EAEA,OACEA;EACE;EAAA,CACCE,OAAO,CAACR,mBAAmB,EAAEa,SAAS;EACvC;EACA;EAAA,CACCL,OAAO,CAACP,sBAAsB,EAAEU,KAAK,CAAC;;EAG3C;AACF;AACA;AACA;AACA;EACE,SAASE,SAASA,CAACC,IAAI,EAAEC,KAAK,EAAEC,GAAG,EAAE;IACnC,OAAOT,OAAO,CAACU,MAAM,CACnB,CAACH,IAAI,CAACI,UAAU,CAAC,CAAC,CAAC,GAAG,MAAM,IAAI,KAAK,GACnCJ,IAAI,CAACI,UAAU,CAAC,CAAC,CAAC,GAClB,MAAM,GACN,OAAO,EACTF,GAAG,CAACE,UAAU,CAACH,KAAK,GAAG,CAAC,CAAC,EACzBR,OACF,CAAC;EACH;;EAEA;AACF;AACA;AACA;AACA;EACE,SAASI,KAAKA,CAACQ,SAAS,EAAEJ,KAAK,EAAEC,GAAG,EAAE;IACpC,OAAOT,OAAO,CAACU,MAAM,CACnBE,SAAS,CAACD,UAAU,CAAC,CAAC,CAAC,EACvBF,GAAG,CAACE,UAAU,CAACH,KAAK,GAAG,CAAC,CAAC,EACzBR,OACF,CAAC;EACH;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASG,4BAA4BA,CAACD,MAAM,EAAE;EAC5C,IAAIW,MAAM,GAAGjB,kBAAkB,CAACkB,GAAG,CAACZ,MAAM,CAAC;EAE3C,IAAI,CAACW,MAAM,EAAE;IACXA,MAAM,GAAGE,sBAAsB,CAACb,MAAM,CAAC;IACvCN,kBAAkB,CAACoB,GAAG,CAACd,MAAM,EAAEW,MAAM,CAAC;EACxC;EAEA,OAAOA,MAAM;AACf;;AAEA;AACA;AACA;AACA;AACA,SAASE,sBAAsBA,CAACb,MAAM,EAAE;EACtC;EACA,MAAMe,MAAM,GAAG,EAAE;EACjB,IAAIT,KAAK,GAAG,CAAC,CAAC;EAEd,OAAO,EAAEA,KAAK,GAAGN,MAAM,CAACgB,MAAM,EAAE;IAC9BD,MAAM,CAACE,IAAI,CAACjB,MAAM,CAACM,KAAK,CAAC,CAACP,OAAO,CAACN,gBAAgB,EAAE,MAAM,CAAC,CAAC;EAC9D;EAEA,OAAO,IAAIyB,MAAM,CAAC,KAAK,GAAGH,MAAM,CAACI,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,EAAE,GAAG,CAAC;AACxD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}